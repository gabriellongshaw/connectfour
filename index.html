<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Play Connect Four offline or online with friends! Created by Gabe Mods and fixed by bocajthomas.">
<meta name="keywords" content="Connect Four, Gabe Mods, play Connect Four, four in a row">
<meta name="author" content="Gabe Mods, bocajthomas">
<title>Connect Four</title>
<link rel="stylesheet" href="assets/css/styles.css">
<meta name="google-site-verification" content="HihCOsgH0UVQPbqo7pMEgDNXIXR16hIm907pXZPI3w8" />
<meta name="theme-color" content="#ff0000">
<meta property="og:title" content="Connect Four">
<meta property="og:description" content="Play Connect Four offline or online with friends!">
<meta property="og:type" content="website">
<meta property="og:url" content="https://gabemods.github.io/connectfour/">
<meta property="og:image" content="assets/images/og-image.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Connect Four">
<meta name="twitter:description" content="Play Connect Four offline or online with friends!">
<meta name="twitter:image" content="assets/images/og-image.png">
<link rel="manifest" href="assets/images/favicon/manifest.json">
</head>
<body>
  <div id="start-screen" class="screen active fade">
    <h1>Connect Four</h1>
    <button id="play-offline" class="start-screen-button">Play Offline</button>
    <button id="play-online" class="start-screen-button">Play Online</button>
    <div class="credits-container">
  <p class="credits created-by">
    Created by <a class="credits-link" target="_blank" href="https://www.gabriellongshaw.co.uk">Gabriel Longshaw</a>
  </p>
  <p class="credits created-by">
    & <a class="credits-link" target="_blank" href="https://www.bocajsolutions.co.uk">bocajthomas</a>
  </p>
</div>
  </div>
  
  <div id="multiplayer-screen" class="screen" style="display:none;">
    <h1>Online Multiplayer</h1>
    <div id="multiplayer-options">
      <button id="create-game-btn" class="start-screen-button">Create New Game</button>
      <button id="show-join-screen-btn" class="start-screen-button">Join Game</button>
      <button id="back-to-start-from-multiplayer" class="back-button">Back to Start</button>
    </div>

    <div id="join-input-section" style="display:none;">
      <input type="text" id="join-code-input" placeholder="Enter Room Code" class="text-input">
      <button id="join-game-btn" class="start-screen-button">Join Game</button>
      <button id="back-to-options-btn" class="back-button">Back to Options</button>
    </div>

    <p id="multiplayer-status" class="status-message"></p>

    <div id="room-code-display" class="room-code-section" style="display: none">
      <p>Share this code with a friend:</p>
      <span id="room-code"></span>
      <button id="back-to-start-btn" class="back-button">Back</button>
    </div>
  </div>
  
  <div id="game-container" class="game-container" style="display: none">
    <h1>Connect Four</h1>
    <div id="board" class="board" aria-label="Connect Four board" role="grid"></div>
    <div id="info" class="info">Player 1's turn (Red)</div>
    <div class="gamebutton-container">
      <button id="restartBtn" class="restart-btn">Restart</button>
      <button id="leaveGameBtn" class="leave-game">Leave Game</button>
    </div>
  </div>
  
  <dialog id="modal" class="dialog">
  <div class="modal-header">
    <h2>Browser</h2>
    <p>
      When you create an online game, you get a unique code. If you open this website within an app to share that code with a friend, your session will be reset, giving you a different code when you open the website again. To avoid this, we recommend opening the website in an external browser like Chrome or Safari.
    </p>
  </div>
  <div class="modal-actions">
    <button id="close-modal" class="button primary-button">Close</button>
  </div>
</dialog>

  <canvas id="confetti-canvas"></canvas>
  <div id="backdrop" class="backdrop"></div>
  
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyB18M9FSegBBx8ZJnQmXVuWOE_GtAYT1D0",
      authDomain: "connect-four-ea92e.firebaseapp.com",
      projectId: "connect-four-ea92e",
      storageBucket: "connect-four-ea92e.firebasestorage.app",
      messagingSenderId: "661961025897",
      appId: "1:661961025897:web:d983ac6833d8d6c015b5f8",
      measurementId: "G-QPY4TNXN2Y"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    
    window.firebaseDB = db;
  </script>

  <script src="assets/js/main.js" type="module"></script>
  <script src="assets/js/hover-on-touch-screen.js" type="module"></script>
  <script src="assets/js/dialog.js" type="module"></script>
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('assets/js/service-worker.js')
        .then(registration => {
          console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch(error => {
          console.error('Service Worker registration failed:', error);
        });
    });
  }
</script>
</body>
</html>
